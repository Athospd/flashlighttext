PKG_CPPFLAGS = -Iflashlighttext/include -Iflashlighttext/include/kenlm
PKG_LIBS = flashlighttext/lib/libflashlight-text.a \
           flashlighttext/lib/libflashlight-text-kenlm.a \
           flashlighttext/lib/libkenlm.a \
           flashlighttext/lib/libkenlm_util.a \
           flashlighttext/lib/libkenlm_interpolate.a \
           flashlighttext/lib/libkenlm_filter.a \
           flashlighttext/lib/libkenlm_builder.a

all: flashlight $(SHLIB)
$(SHLIB): flashlight

flashlight:
	@echo "Building"
	export CXX=/usr/bin/g++;
	mkdir build || true
	(cd build; \
        CC="$(CC)" CFLAGS="$(CFLAGS)" \
        CPPFLAGS="$(CPPFLAGS)" LDFLAGS="$(LDFLAGS)" \
        cmake .. \
        -DCMAKE_BUILD_TYPE=Release; \
        cmake --build . --config Release)

